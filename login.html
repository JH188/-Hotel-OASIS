<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hotel OASIS - Iniciar Sesi√≥n</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>

  <style>
    body {
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: url("img/hotel.jpg") no-repeat center center fixed;
      background-size: cover;
      font-family: "Segoe UI", Arial, sans-serif;
      position: relative;
    }
    body::before {
      content: "";
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.25);
      z-index: -1;
    }
    .login-card {
      display: flex;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(12px);
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.6);
      width: 880px; max-width: 95%;
      animation: fadeUp 1s ease;
    }
    @keyframes fadeUp { from{opacity:0;transform:translateY(50px) scale(0.95);} to{opacity:1;transform:translateY(0) scale(1);} }

    /* IZQUIERDA */
    .login-left { flex:1; background:rgba(255,255,255,0.97); display:flex; flex-direction:column; align-items:center; justify-content:center; padding:40px; text-align:center; }
    .login-left img { width:110px; margin-bottom:15px; animation:bounce 2s infinite; }
    @keyframes bounce {0%,100%{transform:translateY(0);} 50%{transform:translateY(-5px);}}
    .login-left h2 { font-weight:bold; color:#222; }
    .login-left span { color:#0d6efd; }
    .welcome-text { margin:15px 0; font-size:1.2rem; font-weight:bold; color:#ffd700; text-shadow:0 0 10px #ffd700,0 0 20px #ffae00; animation:glowPulse 2s infinite alternate; }
    @keyframes glowPulse {from{text-shadow:0 0 8px #ffd700,0 0 20px #ffae00;} to{text-shadow:0 0 16px #fff2a8,0 0 32px #ffd700;} }

    .btn-register,.btn-admin { border-radius:25px; padding:10px 30px; font-weight:bold; transition:0.3s; }
    .btn-register { background:#ffc107; color:#222; margin-bottom:15px; }
    .btn-register:hover { background:#e0a800; box-shadow:0 0 15px rgba(255,193,7,0.6); transform:scale(1.05);}
    .btn-admin { background:#343a40; color:#fff; }
    .btn-admin:hover { background:#1d2124; box-shadow:0 0 15px rgba(52,58,64,0.6); transform:scale(1.05); }

    /* DERECHA */
    .login-right { flex:1; background:#1e3d59; color:white; padding:50px; display:flex; flex-direction:column; justify-content:center; }
    .login-right h3 { font-weight:bold; margin-bottom:25px; text-align:center; }
    .input-group { margin-bottom:18px; }
    .input-group-text { background:#f8f9fa; border:1px solid #ced4da; border-right:none; border-radius:10px 0 0 10px !important; color:#0d6efd; font-size:1.1rem; padding:12px 15px; min-width:50px;}
    .form-control { border:1px solid #ced4da; border-left:none; border-radius:0 10px 10px 0 !important; padding:12px;}
    .form-control:focus { border-color:#0d6efd; box-shadow:0 0 12px rgba(13,110,253,0.6);}
    .btn-login { background:linear-gradient(135deg,#00c851,#007e33); border:none; color:white; font-weight:bold; padding:12px; border-radius:25px; width:100%; transition:0.3s;}
    .btn-login:hover { background:linear-gradient(135deg,#007e33,#004d1a); box-shadow:0 0 18px rgba(0,200,81,0.7); transform:scale(1.05);}
    .forgot { text-align:center; margin-top:10px;}
    .forgot a { color:#ffc107; text-decoration:none; }
    .forgot a:hover { text-decoration:underline;}
    @media (max-width:768px){.login-card{flex-direction:column;} .login-right{padding:30px;}}
  </style>
</head>
<body>
  <div class="login-card">
    <!-- IZQUIERDA -->
    <div class="login-left">
      <img src="img/logo.png" alt="Hotel OASIS"/>
      <h2>HOTEL <span>OASIS</span></h2>
      <p class="welcome-text">¬°Bienvenido, te est√°bamos esperando!</p>
      <a href="register.html" class="btn btn-register">Registrarse</a>
      <button class="btn btn-admin" data-bs-toggle="modal" data-bs-target="#adminModal">Administrador</button>
    </div>

    <!-- DERECHA -->
    <div class="login-right">
      <h3><i class="fa fa-user-circle me-2"></i> Iniciar Sesi√≥n</h3>
      <form onsubmit="login(event)">
        <div class="input-group">
          <span class="input-group-text"><i class="fa fa-envelope"></i></span>
          <input type="email" id="email" class="form-control" placeholder="Correo electr√≥nico" required/>
        </div>
        <div class="input-group">
          <span class="input-group-text"><i class="fa fa-lock"></i></span>
          <input type="password" id="password" class="form-control" placeholder="Contrase√±a" required/>
        </div>
        <button class="btn-login">Iniciar Sesi√≥n</button>
      </form>
      <div class="forgot">
        <a href="#" id="forgotPasswordLink">¬øOlvidaste tu contrase√±a?</a>
      </div>
    </div>
  </div>

  <!-- MODAL ADMIN -->
  <div class="modal fade" id="adminModal" tabindex="-1">
    <div class="modal-dialog"><div class="modal-content">
      <div class="modal-header bg-dark text-white">
        <h5 class="modal-title"><i class="fa fa-user-shield me-2"></i> Acceso Administrador</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <form id="adminForm">
          <div class="mb-3"><label class="form-label">Correo</label>
            <input type="text" id="adminEmail" class="form-control" placeholder="Correo administrador" required/></div>
          <div class="mb-3"><label class="form-label">Contrase√±a</label>
            <input type="password" id="adminPass" class="form-control" placeholder="Contrase√±a" required/></div>
          <button type="submit" class="btn btn-dark w-100">Ingresar</button>
        </form>
      </div>
    </div></div>
  </div>

  <!-- MODAL RECUPERAR -->
  <div class="modal fade" id="modalRecuperar" tabindex="-1">
    <div class="modal-dialog"><div class="modal-content">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title">Recuperar Contrase√±a</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <form id="formRecuperar">
          <div class="mb-3">
            <label for="recuperarEmail" class="form-label">Correo registrado</label>
            <input type="email" class="form-control" id="recuperarEmail" required>
          </div>
          <div class="mb-3">
            <label for="nuevaPassword" class="form-label">Nueva contrase√±a</label>
            <input type="password" class="form-control" id="nuevaPassword" required>
          </div>
          <button type="submit" class="btn btn-success w-100">Restablecer</button>
        </form>
      </div>
    </div></div>
  </div>

  <!-- SCRIPTS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // üîπ Login normal
    function login(e) {
      e.preventDefault();
      const email = document.getElementById("email").value.trim();
      const password = document.getElementById("password").value.trim();

      const users = JSON.parse(localStorage.getItem("usuarios")) || [];
      const bloqueados = JSON.parse(localStorage.getItem("usuariosBloqueados")) || [];

      if (bloqueados.includes(email)) {
        alert("‚õî Tu cuenta ha sido bloqueada por el administrador.");
        return;
      }

      const user = users.find(u => u.email === email && u.password === password);

      if (user) {
        alert("‚úÖ Bienvenido " + user.nombre);
        localStorage.setItem("usuarioActivo", JSON.stringify(user));
        window.location.href = "index.html";
      } else {
        alert("‚ùå Usuario o contrase√±a incorrectos");
      }
    }

    // üîë Login admin
    document.getElementById("adminForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const email = document.getElementById("adminEmail").value.trim();
      const pass = document.getElementById("adminPass").value.trim();

      if (email === "HOTEALOASIS" && pass === "hoteloasis") {
        alert("üëë Bienvenido Administrador");
        window.location.href = "admin.html";
      } else {
        alert("‚ùå Credenciales de administrador incorrectas");
      }
    });

    // üîÑ Recuperar contrase√±a
    document.getElementById("forgotPasswordLink").addEventListener("click", () => {
      const modal = new bootstrap.Modal(document.getElementById("modalRecuperar"));
      modal.show();
    });

    document.getElementById("formRecuperar").addEventListener("submit", (e) => {
      e.preventDefault();
      const email = document.getElementById("recuperarEmail").value.trim();
      const nuevaPass = document.getElementById("nuevaPassword").value.trim();

      let usuarios = JSON.parse(localStorage.getItem("usuarios")) || [];
      const index = usuarios.findIndex(u => u.email === email);

      if (index === -1) {
        alert("‚ö†Ô∏è No existe ninguna cuenta con ese correo.");
        return;
      }

      usuarios[index].password = nuevaPass;
      localStorage.setItem("usuarios", JSON.stringify(usuarios));
      alert("‚úÖ Contrase√±a actualizada. Ahora puedes iniciar sesi√≥n con la nueva clave.");

      const modal = bootstrap.Modal.getInstance(document.getElementById("modalRecuperar"));
      modal.hide();
    });
  </script>
</body>
</html>
